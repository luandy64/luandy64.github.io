<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://blog.andylu.dev/favicon.ico" />
<title>Clojurescript Project Setup | Andy&#39;s Garden</title>
<meta name="title" content="Clojurescript Project Setup" />
<meta name="description" content="Noting how I like to setup cljs projects" />
<meta name="keywords" content="clojurescript,emacs,projects," />


<meta property="og:title" content="Clojurescript Project Setup" />
<meta property="og:description" content="Noting how I like to setup cljs projects" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.andylu.dev/blog/clojurescript-project-setup/" /><meta property="og:image" content="https://blog.andylu.dev/images/share.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2020-07-06T07:52:15-05:00" />
<meta property="article:modified_time" content="2020-07-06T07:52:15-05:00" /><meta property="og:site_name" content="Andy&#39;s Garden" />




<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://blog.andylu.dev/images/share.png"/>

<meta name="twitter:title" content="Clojurescript Project Setup"/>
<meta name="twitter:description" content="Noting how I like to setup cljs projects"/>



<meta itemprop="name" content="Clojurescript Project Setup">
<meta itemprop="description" content="Noting how I like to setup cljs projects"><meta itemprop="datePublished" content="2020-07-06T07:52:15-05:00" />
<meta itemprop="dateModified" content="2020-07-06T07:52:15-05:00" />
<meta itemprop="wordCount" content="579"><meta itemprop="image" content="https://blog.andylu.dev/images/share.png"/>
<meta itemprop="keywords" content="clojurescript,emacs,projects," />
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
    overflow-x: auto;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>


  
</head>

<body>
  <header><a href="/" class="title">
  <h2>Andy&#39;s Garden</h2>
</a>
<nav><a href="/">Home</a>

<a href="/now/">Now</a>


<a href="/blog">Blog</a>

</nav>
</header>
  <main>
 
<h1>Clojurescript Project Setup</h1>

<p>
    <strong>
        Last updated

    </strong>
    :
    <time datetime='2020-07-06' pubdate>
        2020-07-06T07:52:15-05:00
    </time>
</p>

 
<content>
    <h4 id="outcomes">Outcomes</h4>
<p>By the end of this post, you will be able to setup a new <code>clojurescript</code>
project, setup <code>emacs</code> to be your development environment, and deploy your
app to Github Pages</p>
<h4 id="background">Background</h4>
<p>I&rsquo;ve written two clojurescript projects now, <a href="/sundial">Sundial</a> and
<a href="/databooze">DataBooze</a>, and I want to document the set up process. The first time
was a massive undertaking because it was my first time. But frustrating
enough, so was the second time, even though I thought I nailed down the
process and took notes on it. The process didn&rsquo;t work and the notes don&rsquo;t
exist, so here we are today.</p>
<h4 id="pre-requisites">Pre-requisites</h4>
<p>There are only three things you need to start: an editor, a terminal, and
<a href="https://github.com/technomancy/leiningen/wiki/Packaging">leiningen</a>. For me, this means <a href="https://www.gnu.org/software/emacs/">Emacs</a>, <a href="https://www.gnu.org/software/bash/">bash</a>, and <code>leiningen</code>
installed through my package manager.</p>
<h4 id="instructions">Instructions</h4>
<p>In your terminal, navigate to where you want the project to live and run</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lein new figwheel-main my-awesome-project -- --reagent
</code></pre></div><p>You should see a new directory called <code>my-awesome-project</code>. There&rsquo;s a
basic skeleton that is created for you, so we want to check that it works</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd my-awesome-project
$ lein fig:build
</code></pre></div><p>This will compile the clojurescript into javascript, serve the project on
(by default) <code>http://localhost:9500</code>, and give you a clojurescript REPL.</p>
<p>If you don&rsquo;t use emacs, I recommend you leave this REPL open and start
editing the code in <code>src/my_awesome_project/core.cljs</code>. If you do use
emacs, I recommend setting up <a href="https://github.com/clojure-emacs/cider">CIDER</a> and getting <a href="https://github.com/nrepl/nrepl">nREPL</a> to work.</p>
<p>First we open emacs and install CIDER</p>
<pre><code>M-x package-refresh-contents [RET]
M-x package-install [RET] cider [RET]
</code></pre><p>When I run <code>M-x cider-version</code>, I get <code>CIDER 0.26.0-snapshot</code>.</p>
<p>If you haven&rsquo;t already, kill the REPL we opened from <code>lein fig:build</code>.
We&rsquo;re going to start a new one in emacs.</p>
<p>Open <code>src/my_awesome_project/core.cljs</code> in a buffer. Then run</p>
<pre><code>M-x cider-jack-in-cljs [RET]
</code></pre><p>A series of prompts will appear, answer with:</p>
<ul>
<li><code>lein</code>
<ul>
<li>This one most likely will not appear, but I saw it once and the other
option was <code>shadow-cljs</code>. I didn&rsquo;t try to pick <code>shadow-cljs</code> because
it just worked when I picked <code>lein</code></li>
</ul>
</li>
<li><code>figwheel-main</code></li>
<li><code>dev</code></li>
</ul>
<p>This will give you a buffer with output similar to what we got at the
terminal. You can edit the code in <code>core.cljs</code> and see the UI reload when
you save. More importantly, you can evaluate the clojurescript in your
buffer.</p>
<h5 id="deploying-to-github-pages">Deploying to Github Pages</h5>
<p>I&rsquo;m assuming this would work for Gitlab Pages or Bitbucket Pages, but I
use Github and didn&rsquo;t test those options.</p>
<p>Create a branch called <code>gh-pages</code>. You&rsquo;ll just need 3 files at the root of
your project: <code>index.html</code>, <code>style.css</code>, and <code>main.js</code>. Obviously, the
names are up to you, but here&rsquo;s where I got the files.</p>
<p><code>index.html</code> is just some boilerplate HTML. Here&rsquo;s one you can use:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span>&gt;
  &lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;My title&lt;/<span style="color:#f92672">title</span>&gt;
    &lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/css&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;style.css&#34;</span>/&gt;
  &lt;/<span style="color:#f92672">head</span>&gt;
  &lt;<span style="color:#f92672">body</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
    &lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;main.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
  &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>The important part here is that you have some element with <code>id=&quot;app&quot;</code>
because that&rsquo;s how we hook up the javascript to the project. But again,
even that is configurable.</p>
<p>To get <code>style.css</code> and <code>main.js</code>, I run these commands at the root of the
project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ lein fig:min
2020-07-06 09:13:50.378:INFO::main: Logging initialized @4805ms to org.eclipse.jetty.util.log.StdErrLog
<span style="color:#f92672">[</span>Figwheel<span style="color:#f92672">]</span> Validating figwheel-main.edn
<span style="color:#f92672">[</span>Figwheel<span style="color:#f92672">]</span> figwheel-main.edn is valid <span style="color:#ae81ff">\(</span>ツ<span style="color:#f92672">)</span>/
<span style="color:#f92672">[</span>Figwheel<span style="color:#f92672">]</span> Compiling build dev to <span style="color:#e6db74">&#34;resources/public/cljs-out/dev-main.js&#34;</span>
<span style="color:#f92672">[</span>Figwheel<span style="color:#f92672">]</span> Successfully compiled build dev to <span style="color:#e6db74">&#34;resources/public/cljs-out/dev-main.js&#34;</span> in 12.307 seconds.
$ cp resources/public/cljs-out/dev-main.js main.js
$ cp resources/public/css/style.css .
</code></pre></div><p>So now you can commit the HTML, CSS, and JS to the <code>gh-pages</code> branch,
push, turn on Github Pages deploys in the Settings tab of your repo, and
see your live project.</p>

</content>

<p>
    
    <a href="https://blog.andylu.dev/blog/filter/clojurescript/">#clojurescript</a>
    
    <a href="https://blog.andylu.dev/blog/filter/emacs/">#emacs</a>
    
    <a href="https://blog.andylu.dev/blog/filter/projects/">#projects</a>
    
</p>


  </main>
  <footer>
</footer>

    
</body>

</html>
