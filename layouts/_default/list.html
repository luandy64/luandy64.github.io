{{ define "main" }}
<content>

    {{ $kinds := slice "blog" "handwritten" "indieweb"}}
    {{ $pages := .Site.RegularPages.ByTitle.ByDate.Reverse  }}

    {{ if .Data.Singular }}
        <h3 style="margin-bottom:0">
            Filtering for "{{ .Title }}"
        </h3>
        <small>
            <a href="{{ "blog" | relURL }}">
                Remove filter
            </a>
        </small>

        {{ $pages = .Site.Taxonomies.tags.Get (lower .Title) }}
    {{ end }}

    <ul class="blog-posts">
        {{ range where $pages "Type" "in" $kinds }}
        <li>
            <span>
                <i>
                    <time datetime='{{ .Date.Format "2006-01-02" }}' pubdate>
                        {{ .Date.Format "2006-01-02" }}
                    </time>
                </i>
            </span>
            <a href="{{ .Permalink }}">
                {{ .Title }}
            </a>
        </li>
        {{ else }}
        <li>
            No posts yet
        </li>
        {{ end }}
    </ul>

    <small>
        <div>
            {{ range .Site.Taxonomies.tags }}
            <a href="{{ .Page.RelPermalink }}">
                #{{ .Page.Title }}
            </a>&nbsp;
            {{ end }}
        </div>
    </small>

</content>
{{ end }}
